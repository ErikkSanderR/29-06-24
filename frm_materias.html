<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matérias</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->
    <link href="./font-awesome.min.css" rel="stylesheet">
    <link href="./bootstrap.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="./favicon.ico">
</head>

<body>

    <div id="mydiv"></div>

    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> -->
    <script src="./bootstrap.bundle.min.js"></script>

    <!-- <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script> -->
    <script src="./react.development.js"></script>

    <!-- <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"></script> -->
    <script src="./popper.js"></script>

    <!-- <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script> -->
    <script src="./react-dom.development.js"></script>

    <!-- <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>     -->
    <script src="./babel.min.js"></script>

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/react-router-dom/6.22.2/react-router-dom.production.min.js" integrity="sha512-82Gx5QtMrxGdjQk0W8k1+yVQL3mhQUMQJkBWfCp0IuGqyyYtxA1Sd4VfhdbZIPaEX2MEOSvy7Hb17w7zYRNfJQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <script src="./react-router-dom.production.min.js"></script>

    <!-- <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script> -->
    <script src="./jquery-3.7.1.min.js"></script>

    <!-- <script src="./form.js"></script> -->

    <script type="text/babel">
        const h1Titulo = React.createRef();
        const txtNome = React.createRef();
        const txtId = React.createRef();
        const lblNome = React.createRef();
        const lblId = React.createRef();
      
        const btnCriar = React.createRef();
        const btnLer = React.createRef();
        const btnAtualizar = React.createRef();
        const btnDeletar = React.createRef();
        const btnAnterior = React.createRef();
        const btnProximo = React.createRef();
        const btnCadastrar = React.createRef();
        

        const quebraLinha = React.createRef();

        const frmCadastrar = React.createRef();

        const divNotificacao = React.createRef();

        const enviarFormulario = () => {
            var formData = {
                txtNome: $("#txtNome").val(),
               
            };

            $.ajax({
                type: "POST",
                url: "cadastrar.php",
                data: formData,
                dataType: "json",
                encode: true,
            })
            .done(function (data) {
                divNotificacao.current.innerText = data.message;
                $("#divNotificacao").removeClass("collapse");
            })
            .fail(function (data) {
                divNotificacao.current.innerText = data.message;
                $("#divNotificacao").removeClass("collapse");
            });

            event.preventDefault();
        }

        const validarCampos = () => {
            console.clear();

            let camposParaValidar = [
                txtNome,
               
            ];

            let camposNaoPreenchidos = [];
            for (let c = 0; c < camposParaValidar.length; c++) {
                if (camposParaValidar[c].current.value == '') {
                    camposNaoPreenchidos.push(camposParaValidar[c].current.id);
                }
            }

            if (camposNaoPreenchidos.length > 0) {
                console.log("Ops! Foram encontrados " + camposNaoPreenchidos.length + " campos não preenchidos, quais sejam abaixo: ");
                camposNaoPreenchidos.forEach(function(entry) { console.log(entry) });
                console.log("Favor preencher os campos acima para continuar com o cadastro.");
                $("#frmCadastrar").submit(function (event) { return false });
            } else {
                console.log("Parabéns! Todos os campos foram preenchidos.");
                // $('#frmCadastrar').trigger("submit");
                enviarFormulario();
            }
        }

        const txt_Nome = (
            <input
                type={"text"}
                id={"txtNome"}
                name={"txtNome"}
                key={"txtNome"}
                ref={txtNome}
                className={"form-control"}
            />
        );

        const txt_Id = (
            <input
                type={"text"}
                id={"txtId"}
                name={"txtId"}
                key={"txtId"}
                ref={txtId}
                className={"form-control"}
            />
        );
        const btn_Criar = (
            <button
                id={"btnCriar"}
                key={"btnCriar"}
                ref={btnCriar}
                className={"form-control"}
            >
                <i 
                className={"fa-solid fa-plus"}
                ></i>
            </button>

        );
        const btn_Ler = (
            <button
                id={"btnLer"}
                key={"btnLer"}
                ref={btnLer}
                className={"form-control"}
            >
                <i 
                className={"fa-solid fa-book"}
                ></i>
            </button>

        );
        const btn_Atualizar = (
            <button
                id={"btnAtualizar"}
                key={"btnAtualizar"}
                ref={btnAtualizar}
                className={"form-control"}
            >
                <i 
                className={"fa-solid fa-pen"}
                ></i>
            </button>

        );
        const btn_Deletar= (
            <button
                id={"btnDeletar"}
                key={"btnDeletar"}
                ref={btnDeletar}
                className={"form-control"}
            >
                <i 
                className={"fa-solid fa-xmark"}
                ></i>
            </button>

        );
        const btn_Anterior = (
            <button
                id={"btnAnterior"}
                key={"btnAnterior"}
                ref={btnAnterior}
                className={"form-control"}
            >
                <i 
                 className={"fa-solid fa-arrow-left"}
                ></i>
            </button>

        );
        const btn_Proximo = (
            <button
                id={"btnProximo"}
                key={"btnProximo"}
                ref={btnProximo}
                className={"form-control"}
            >
                <i 
                   className={"fa-solid fa-arrow-right"}
                ></i>
            </button>

        );

        const lbl_Nome = (
            <label
                id={"lblNome"}
                name={"lblNome"}
                key={"lblNome"}
                ref={lblNome}
                className={"input-group-text"}
            >Nome</label>
        );

        const lbl_Id = (
            <label
                id={"lbl_Id"}
                name={"lbl_Id"}
                key={"lbl_Id"}
                ref={lbl_Id}
                className={"input-group-text"}
            >Id</label>
        );
       

        const Btn_Cadastrar = () => {
            return (
                <button
                    className={"form-control btn btn-primary"}
                    id={"btnCadastrar"}
                    key={"btnCadastrar"}
                    ref={btnCadastrar}
                    onClick={validarCampos}
                >Registrar</button>
            );
        }

        const quebra_Linha = (
            <br
                id={"quebraLinha"}
                key={"quebraLinha"}
                ref={quebraLinha}
            />
        );

        function exibirQuebraLinha(keyNumber) {
            return (
                <br
                    id={keyNumber}
                    key={keyNumber}
                    ref={quebraLinha}
                />
            );
        }

        function getNewInputGroup(spanLabel, inputObj) {
            let idTemp = "div_input_group_Nome_" + Math.random(); 
            return (
                <div
                    className={"input-group input-group-lg"}
                    id={idTemp}
                    key={idTemp}
                >
                    {spanLabel}
                    {inputObj}
                </div>
            );
        }

        const Div_Notificacao = () => {
            return (
                <div 
                    className= {"input-group collapse border-dark form-control justify-content-center"}
                    id={"divNotificacao"}
                    key={"divNotificacao"}
                    ref={divNotificacao}
                >Aqui será exibida a notificação de cadastro concluído ou algum erro</div>
            );
        }

        const formulario = [
            getNewInputGroup(lbl_Nome, txt_Nome),
            getNewInputGroup(lbl_Id, txt_Id),
           
        ];

        const frm_Cadastrar = (
            <form
                className={"form"}
                method={"post"}
                // encType={"multipart/form"}
                action={"./cadastrar.php"}
                id={"frmCadastrar"}
                key={"frmCadastrar"}
                ref={frmCadastrar}
            >
                {formulario}
            </form>
        );

        const FrmCadastro = () => {
            return formulario;
        }

        const Frm = () => {
            return frm_Cadastrar;
        }

        const Titulo = () => {
            return (
                <h1>
                    Formulário de cadastro
                </h1>
            );
        }

        const container = document.getElementById('mydiv');
        const root = ReactDOM.createRoot(container);
        root.render(
            <React.StrictMode>
                <Titulo />
                <Frm />
                <Div_Notificacao />
                <Btn_Cadastrar />
            </React.StrictMode>
        ); // renderizar via variável (contém o objeto a ser renderizado)
    </script>
</body>

</html>